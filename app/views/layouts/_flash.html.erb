<% flash.each do |type, msg| %>
  <% base_classes = "font-bold rounded-md mb-4 px-6 py-3 shadow-md relative flex items-start justify-between gap-4 animate-fade" %>
  <% alert_classes = case type.to_sym
    when :notice, :success
      "bg-green-100 border border-green-400 text-green-800"
    when :alert, :danger, :error
      "bg-red-100 border border-red-400 text-red-800"
    when :warning
      "bg-yellow-100 border border-yellow-400 text-yellow-800"
    when :info
      "bg-blue-100 border border-blue-400 text-blue-800"
    else
      "bg-gray-100 border border-gray-400 text-gray-800"
  end %>

  <div class="<%= "#{base_classes} #{alert_classes}" %>" data-dismissible>
    <div><%= msg %></div>
    <button class="text-xl leading-none focus:outline-none" onclick="this.parentElement.remove()">Ã—</button>
  </div>
<% end %>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    document.querySelectorAll("[data-dismissible]").forEach(el => {
      setTimeout(() => el.remove(), 3000); // auto-remove after 3 seconds
    });
  });
</script>
